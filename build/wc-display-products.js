(()=>{"use strict";const e=window.wp.element,t=window.wp.blocks,c=window.wp.data,r=window.wp.blockEditor,l=window.wp.components,n=JSON.parse('{"name":"ac/wc-display-products"}'),{name:a}=n;(0,t.registerBlockType)(a,{edit:t=>{const{attributes:n,setAttributes:a,isSelected:o,clientId:s}=t,i={per_page:n.numberOfProducts,orderby:"title",order:"asc",status:"publish"},d=(0,r.useBlockProps)(),{posts:p}=(0,c.useSelect)((e=>({posts:e("core").getEntityRecords("postType","product",i)})),[n.numberOfProducts]),m=window.location.protocol+"//"+window.location.host+"/wp-content/plugins/dpuk-wc-display-products/includes/blocks/wc-display-products/src/woocommerce-placeholder.png";return(0,e.createElement)("div",{...d},!p&&(0,e.createElement)(l.Spinner,null),p&&0===p.length&&"No Products",p&&p.length>0&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(l.PanelBody,{title:"Select number of posts to display.",initialOpen:!0},(0,e.createElement)(l.PanelRow,null,(0,e.createElement)(l.__experimentalNumberControl,{onChange:e=>a({numberOfProducts:e}),isDragEnabled:!0,isShiftStepEnabled:!0,shiftStep:10,step:1,value:n.numberOfProducts,min:-1})))),(0,e.createElement)("div",{className:"product-block__title-section"},(0,e.createElement)(r.RichText,{tagName:"h2",className:"product-block__title",value:n.productSectionTitle,onChange:e=>a({productSectionTitle:e}),placeholder:"Section title goes here"})),(0,e.createElement)("div",{className:"product-block-inner"},p.map((t=>{const c=t.featured_media?wp.data.select("core").getMedia(t.featured_media):null,r=c?c.media_details.sizes.woocommerce_thumbnail.source_url:m;return(0,e.createElement)("div",{key:t.id,className:"product-card"},(0,e.createElement)("div",{className:"product-card__image"},!c&&(0,e.createElement)(l.Spinner,null),c&&(0,e.createElement)("img",{src:r})),(0,e.createElement)("div",{className:"product-card__contents"},(0,e.createElement)("div",{className:"product-card__title"},(0,e.createElement)("h3",{key:t.title},t.title.rendered)),(0,e.createElement)("div",{className:"product-card__price"},(0,e.createElement)("span",{key:t.dp_price},(t.dp_currency,"Â£"),t.dp_price))))})))))},save:e=>null})})();